# Plan 14.1-01: Update Planning Documents and Clean Up Inbox

---
wave: 1
depends_on: []
files_modified:
  - .planning/ROADMAP.md
  - .planning/REQUIREMENTS.md
  - .planning/inbox/aquapose_pipeline_stage_structure.md (DELETE)
  - .planning/inbox/target_mapping.md (DELETE)
  - .planning/inbox/phase_15_partial_context.md (DELETE)
requirements: []
autonomous: true
---

## Goal

Align all planning documents to the guidebook's canonical 5-stage pipeline model (Detection, Midline, Association, Tracking, Reconstruction). Delete redundant inbox documents that were superseded by the guidebook.

## Context

The alpha refactoring guidebook (`.planning/alpha_refactor_guidebook.md`) defines 5 pipeline stages. The ROADMAP and REQUIREMENTS still reference the old 7-stage model with separate segmentation, midline extraction, triangulation, tracking, and curve optimizer stages. Phase 15's plan list must be corrected from 7 plans to 5, and STG requirements renumbered from STG-01..07 to STG-01..05.

The three inbox documents are now redundant with the guidebook and must be deleted.

## Tasks

<task id="1">
<title>Renumber STG requirements and update Phase 15 plans in ROADMAP.md and REQUIREMENTS.md</title>
<description>
Update both `.planning/ROADMAP.md` and `.planning/REQUIREMENTS.md` to reflect the 5-stage model.

**REQUIREMENTS.md changes:**
1. Replace the 7 STG requirements with 5:
   - `STG-01`: Detection stage ported (model-based backend: YOLO/MOG2) — pure computation, no side effects
   - `STG-02`: Midline stage ported (segment-then-extract backend: U-Net/SAM segmentation + skeletonization + BFS pruning) — pure computation, no side effects
   - `STG-03`: Cross-view association stage ported (RANSAC centroid clustering) — pure computation, no side effects
   - `STG-04`: Tracking stage ported (Hungarian 3D tracking with population constraint) — pure computation, no side effects
   - `STG-05`: Reconstruction stage ported (triangulation backend: RANSAC + view-angle weighting + B-spline fitting; curve optimizer backend planned) — pure computation, no side effects
2. Update the traceability table: STG-01..05 all map to Phase 15
3. Update the coverage count: should be 22 total (was 24, minus 2 from 7->5)

**ROADMAP.md changes:**
1. Replace Phase 15 plan list from 7 plans to 5:
   - `15-01`: Detection stage (model-based backend)
   - `15-02`: Midline stage (segment-then-extract backend)
   - `15-03`: Cross-view association stage
   - `15-04`: Tracking stage (Hungarian backend)
   - `15-05`: Reconstruction stage (triangulation backend)
2. Update Phase 15 requirements field from `STG-01..STG-07` to `STG-01..STG-05`
3. Update Phase 15 Success Criteria point 1 to mention "model-based detection backend" instead of "YOLO and MOG2 backends"
4. Update Phase 15 description/plan count references from 7 to 5
5. Update the Progress table row for Phase 15 from 0/7 to 0/5

**Cross-references:** Search both files for any mention of "STG-06", "STG-07", "7 computation stages", "segmentation stage", "triangulation stage" (as separate stage names) and correct them.
</description>
</task>

<task id="2">
<title>Delete redundant inbox documents</title>
<description>
Delete these three files from `.planning/inbox/`:
1. `aquapose_pipeline_stage_structure.md` — redundant with guidebook Section 6
2. `target_mapping.md` — redundant with guidebook migration strategy
3. `phase_15_partial_context.md` — mismatch documentation no longer needed after this fix

Use `git rm` for tracked files or plain `rm` for untracked files. Check git status first to determine which approach is needed for each file.
</description>
</task>

## Verification

- [ ] REQUIREMENTS.md has exactly 5 STG-* requirements (STG-01 through STG-05)
- [ ] REQUIREMENTS.md traceability table maps STG-01..05 to Phase 15
- [ ] REQUIREMENTS.md coverage count is correct (22 total)
- [ ] ROADMAP.md Phase 15 has exactly 5 plans listed
- [ ] ROADMAP.md Phase 15 requirements field says STG-01..STG-05
- [ ] ROADMAP.md Progress table shows 0/5 for Phase 15
- [ ] No references to "STG-06" or "STG-07" remain in ROADMAP.md or REQUIREMENTS.md
- [ ] No references to "segmentation stage" or "triangulation stage" as separate standalone stages in Phase 15 descriptions
- [ ] Three inbox files are deleted: `aquapose_pipeline_stage_structure.md`, `target_mapping.md`, `phase_15_partial_context.md`

## must_haves

Derived from phase goal (goal-backward):

1. **Phase 15 plan structure matches guidebook** — exactly 5 plans, one per canonical stage
2. **STG requirements match guidebook stages** — STG-01=Detection, STG-02=Midline, STG-03=Association, STG-04=Tracking, STG-05=Reconstruction
3. **No stale 7-stage references in planning docs** — no STG-06/07, no "segmentation stage" or "triangulation stage" as separate stages
4. **Redundant inbox files removed** — the three documents that conflict with the guidebook are deleted
