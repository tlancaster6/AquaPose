---
phase: 19-alpha-refactor-audit
plan: 04
type: execute
wave: 1
depends_on: []
files_modified:
  - .planning/phases/19-alpha-refactor-audit/19-04-BUG-TRIAGE.md
autonomous: true
requirements: [AUDIT]

must_haves:
  truths:
    - "Every bug/quirk in 15-BUG-LEDGER.md has been triaged as resolved, no-longer-relevant, or open"
    - "Open items include actionable remediation notes for the audit report"
    - "The triage output is available for 19-03 to incorporate into 19-AUDIT.md"
  artifacts:
    - path: ".planning/phases/19-alpha-refactor-audit/19-04-BUG-TRIAGE.md"
      provides: "Triage of all Phase 15 bug ledger items with resolution status"
  key_links:
    - from: ".planning/phases/19-alpha-refactor-audit/19-04-BUG-TRIAGE.md"
      to: ".planning/phases/19-alpha-refactor-audit/19-AUDIT.md"
      via: "19-03 executor incorporates open findings into audit report"
      pattern: "bug-triage"
    - from: ".planning/phases/15-stage-migrations/15-BUG-LEDGER.md"
      to: ".planning/phases/19-alpha-refactor-audit/19-04-BUG-TRIAGE.md"
      via: "triage of each ledger item"
      pattern: "bug-ledger-review"
---

<objective>
Review every bug and quirk documented in the Phase 15 Bug Ledger (15-BUG-LEDGER.md) and triage each one.

Purpose: The Phase 15 bug ledger captured v1.0 behavioral quirks preserved during stage migrations for numerical equivalence. Now that the full refactor (Phases 13-18) is complete, some of these may have been resolved, some may be irrelevant, and some may still be open technical debt. This plan triages each item so the audit report (19-AUDIT.md, produced by Plan 19-03) can incorporate any remaining open items.

Output: 19-04-BUG-TRIAGE.md — a structured triage document that 19-03 will incorporate into the audit report's findings.
</objective>

<execution_context>
@C:/Users/tucke/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/tucke/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/15-stage-migrations/15-BUG-LEDGER.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/19-alpha-refactor-audit/19-CONTEXT.md
@src/aquapose/core/tracking/stage.py
@src/aquapose/core/reconstruction/stage.py
@src/aquapose/core/association/stage.py
@src/aquapose/engine/config.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Triage each Phase 15 bug ledger item</name>
  <files>.planning/phases/19-alpha-refactor-audit/19-04-BUG-TRIAGE.md</files>
  <action>
Read `15-BUG-LEDGER.md` and for each documented bug/quirk, investigate the current codebase to determine its status. There are 7 items in the ledger:

**Item 1: Stage 3 output not consumed by Stage 4**
- Check `src/aquapose/core/tracking/stage.py` — does `HungarianBackend.track_frame()` still ignore `bundles` (Stage 3 output)?
- Check if any subsequent phase (16-18) changed this behavior
- Verdict: Resolved / No Longer Relevant / Open

**Item 2: Hungarian Backend reads Stage 1, not Stage 3**
- Related to Item 1 — check if the tracking backend now uses `associated_bundles` or still reads `detections_per_camera`
- Check module docstring in `core/tracking/stage.py` for documentation status
- Verdict: Resolved / No Longer Relevant / Open

**Item 3: MidlineSet assembly from decoupled stages**
- Check `src/aquapose/core/reconstruction/stage.py` — is the MidlineSet assembly logic still the bridge pattern described in the ledger?
- Is this a quirk that needs fixing, or is it now the intended architecture?
- Verdict: Resolved / No Longer Relevant / Open

**Item 4: Hardcoded thresholds extracted to config**
- Check `src/aquapose/engine/config.py` — confirm `ReconstructionConfig` has `inlier_threshold`, `snap_threshold`, `max_depth` fields
- This was a positive change, not a bug — verify it's complete
- Verdict: Resolved / No Longer Relevant / Open

**Item 5: Camera skip hardcoded to "e3v8250"**
- Check if `skip_camera_id` is now configurable via `PipelineConfig` or still hardcoded per-stage
- Grep for "e3v8250" across `src/aquapose/` to find all hardcoded references
- Verdict: Resolved / No Longer Relevant / Open

**Item 6: CurveOptimizer statefulness preserved**
- Check `src/aquapose/core/reconstruction/stage.py` for `CurveOptimizerBackend`
- Is the statefulness documented? Is it still the correct design?
- Verdict: Resolved / No Longer Relevant / Open

**Item 7: AssociationConfig was empty placeholder**
- Check current `AssociationConfig` in `engine/config.py` — should now have real fields
- Verify this was completed in Phase 15-03 as the ledger says
- Verdict: Resolved / No Longer Relevant / Open

**For each item, write a triage entry in 19-04-BUG-TRIAGE.md with:**
- Original ledger description (brief)
- Current status: **Resolved** (fixed by subsequent work), **Accepted** (intentional design, not a bug), **Open** (still present, needs remediation)
- Evidence: file paths and line numbers showing current state
- If Open: recommended severity (Critical/Warning/Info) and brief remediation note for the audit report

**Document format:**

```markdown
# Phase 15 Bug Ledger — Triage

**Triaged:** [date]
**Input:** .planning/phases/15-stage-migrations/15-BUG-LEDGER.md
**Purpose:** Feed into 19-AUDIT.md (produced by Plan 19-03)

## Summary

| # | Item | Status | Severity |
|---|------|--------|----------|
| 1 | Stage 3 output not consumed by Stage 4 | Open/Resolved/Accepted | —/Warning/etc |
| ... | ... | ... | ... |

## Detailed Triage

### 1. Stage 3 Output Not Consumed by Stage 4
**Original:** [brief quote]
**Status:** [Resolved/Accepted/Open]
**Evidence:** [file:line references]
**Notes:** [remediation if Open]

[repeat for each item]

## Open Items for 19-AUDIT.md

[List only Open items with their recommended severity and remediation notes, formatted for easy incorporation into the audit report's findings]
```
  </action>
  <verify>
    <automated>cd C:/Users/tucke/PycharmProjects/AquaPose && python -c "
content = open('.planning/phases/19-alpha-refactor-audit/19-04-BUG-TRIAGE.md').read()
required = ['Summary', 'Detailed Triage', 'Open Items']
missing = [s for s in required if s not in content]
items = content.count('###')
print(f'Missing sections: {missing}' if missing else 'All sections present')
print(f'Triage entries: {items} (expected: 7)')
"</automated>
  </verify>
  <done>All 7 bug ledger items have been triaged with status (Resolved/Accepted/Open), evidence from the current codebase, and remediation notes for any open items. The triage document is ready for 19-03 to incorporate into 19-AUDIT.md.</done>
</task>

</tasks>

<verification>
1. 19-04-BUG-TRIAGE.md exists in the phase directory
2. All 7 items from 15-BUG-LEDGER.md are triaged
3. Each item has a clear status verdict with codebase evidence
4. Open items include severity and remediation notes
5. Summary table provides at-a-glance triage status
6. Open Items section is formatted for easy incorporation into 19-AUDIT.md
</verification>

<success_criteria>
- Every bug/quirk from 15-BUG-LEDGER.md has a triage verdict
- Evidence is drawn from actual codebase inspection (file paths, line numbers)
- Open items have severity ratings consistent with 19-CONTEXT.md's 3-tier system
- The document is structured for consumption by Plan 19-03
</success_criteria>

<output>
After completion, create `.planning/phases/19-alpha-refactor-audit/19-04-SUMMARY.md`
</output>
